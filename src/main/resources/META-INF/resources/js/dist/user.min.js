$(document).ready(function(){var o="#btnLogin",t="#btnSearchPw",e="#txtRegId",n="#txtRegEmail",i=[e,n],a="#joinStep02",c=".YAGGWAN_AGREE",l="#joinUserId",r="#joinPw",d="#joinPwConfirm",s="#joinUserName",h="#joinUserEmail",u="#joinUserEmail2",p="#joinUserPhoneF",m="#joinUserPhoneM",v="#joinUserPhoneL",f="#joinStep03Id",g="#joinStep03Pw",w="#joinStep03Name",j="#joinStep03Email",k="#joinStep03Phone",S=".joinBox",x="#btnJoinStep01Next",P=!1,M="",N=[l,r,d,s,h,m,v,u],C=null;function E(){return!!(hotplace.validation.isFormNotEmpty(N)&&function(){var o=!0,t=$(l);P&&M==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".DUP"):(hotplace.validation.ctrlValidMsg(t,!0,".DUP"),o=!1);return o}()&&hotplace.validation.isPasswordFormat($(r))&&function(){var o=$(r),t=$(d),e=!0;$.trim(o.val())==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".CONFIRM"):(hotplace.validation.ctrlValidMsg(t,!0,".CONFIRM"),e=!1);return e}()&&hotplace.validation.isValidEmail($(h),$(u).val())&&hotplace.validation.isValidPhoneM($(m))&&hotplace.validation.isValidPhoneL($(v)))}function U(){$(c).each(function(){this.checked=!1}),function(){P=!1,M="";for(var o=N.length-1;o>=0;o--)$(N[o]).val("");$(u).val("X"),$(p).val("010"),$("#joinStep02 .helpCont").css("display","none")}(),$(f).text(""),$(g).text(""),$(w).text(""),$(j).text(""),$(k).text("")}$(document).on("change",c,function(){var o,t,e=$(x);o=function(o){o?e.is(":disabled")&&e.removeAttr("disabled"):e.prop("disabled",!0)},t=!0,$(c).each(function(){if("Y"==$(this).data("required")&&!$(this).is(":checked"))return t=!1,!1}).promise().done(function(){o&&o(t)})}),$(document).on("click",x,function(){$(S).hide(),$(a).show()}),$(document).on("click","#btnJoinStep02Prev",function(){$(S).hide(),$("#joinStep01").show()}),$(document).on("click","#btnJoinStep02Next",function(){E()&&($(f).text($(l).val()),$(g).text(hotplace.util.maskAll($(r).val())),$(w).text($(s).val()),$(j).text(hotplace.util.getEmail($(h),$(u))),$(k).text($(p).val()+"-"+$(m).val()+"-"+$(v).val()),C={id:$(l).val(),userName:$(s).val(),password:$(r).val(),phone:$(k).text(),email:$(j).text()},$(S).hide(),$("#joinStep03").show())}),$(document).on("click","#btnStep03Cancel",function(){U(),$(S).hide(),$(a).show()}),$(document).on("click","#btnStep03Ok",function(){hotplace.ajax({url:"user/join",data:JSON.stringify(C),contentType:"application/json; charset=UTF-8",success:function(o,t,e){o.success?(U(),$(S).hide(),$("#joinStep04").show()):e.errCode=o.errCode||hotplace.error.JOIN},error:function(o,t,e){o.errCode=hotplace.error.JOIN}})}),$(document).on("click","#btnJoinIdCheck",function(){var o=$(l).val();hotplace.ajax({url:"user/checkId?id="+o,method:"GET",success:function(t,e,n){t.success&&(t.errCode==hotplace.error.DUP_ID?n.errCode=t.errCode:(P=!0,M=o,hotplace.validation.ctrlValidMsg($(l),!1,".DUP"),hotplace.dom.showAlertMsg(null,"사용가능한 아이디입니다.",{width:"30%"})))}})}),$(document).on("click",o,function(){var o=$("#id").val(),t=$("#pw").val();""!=$.trim(o)?""!=$.trim(t)?hotplace.ajax({url:"login",method:"POST",dataType:"text",data:$("#loginFm").serialize(),success:function(o,t,e){var n=$.parseJSON(o);if(n.success){var i=!$.cookie("remain");hotplace.dom.closeModal(),i&&n.datas.length>0?hotplace.dom.showExpireMsgForm(function(){hotplace.dom.toggleLogin()},{list:n.datas}):hotplace.dom.toggleLogin()}else e.errCode=n.errCode},error:function(o,t,e){}}):$("#pw").focus():$("#id").focus()}),$(document).on("click","#joinBtn",function(){hotplace.dom.showJoinForm({width:600},function(){U()})}),$(document).on("click","#searchPwBtn",function(){hotplace.dom.showPwSearchForm()}),$(document).on("keydown",n,function(o){13==o.keyCode&&$(t).trigger("click")}),$(document).on("click",t,function(){hotplace.validation.isFormNotEmpty(i)&&hotplace.validation.isValidEmail($(n),"D")&&hotplace.ajax({url:"search/password",method:"POST",contentType:"application/json; charset=UTF-8",data:JSON.stringify({accountId:$(e).val(),email:$(n).val()}),success:function(o,t,e){o.success?hotplace.dom.showAlertMsg(function(){hotplace.dom.closeMom()},"비밀번호를 메일로 발송해 드렸습니다.",{width:400}):hotplace.dom.showAlertMsg(null,o.errMsg,{width:400})},error:function(o,t,e){}})}),$(document).on("click","#btnStep04Login",function(){hotplace.dom.showLoginForm()}),$(document).off("keydown","#pw").on("keydown","#pw",function(t){if(13==t.which){t.target.value;$(o).trigger("click")}}),hotplace.validation.phone("#joinStep02 .NUMBER_ONLY")});