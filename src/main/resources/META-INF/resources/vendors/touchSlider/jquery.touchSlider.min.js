!function(l){"use strict";l.fn.touchSlider=function(t){l.fn.touchSlider.defaults={roll:!0,flexible:!0,resize:!0,btn_prev:null,btn_next:null,paging:null,speed:150,view:1,range:.15,page:1,sidePage:!1,transition:!0,initComplete:null,counter:null,propagation:!1,autoplay:{enable:!1,pauseHover:!0,addHoverTarget:"",interval:3500},breakpoints:null,supportsCssTransitions:"transition"in document.documentElement.style||"WebkitTransition"in document.documentElement.style};var i=l.extend(!0,{},l.fn.touchSlider.defaults,t);if(i.breakpoints)for(var s in i.breakpoints.defaultOption={roll:i.roll,flexible:i.flexible,speed:i.speed,view:i.view,sidePage:i.sidePage},i.breakpoints)"default"!==s&&(i.breakpoints[s]=l.extend({},i.breakpoints.defaultOption,i.breakpoints[s]));return this.each(function(){var t=this;l.fn.extend(this,e),this.opts=i,this.init(),l(window).on("orientationchange resize",function(){t.resize(t)})})};var e={init:function(){var s=this;if(this._view=this.opts.view,this._speed=this.opts.speed,this._tg=l(this),this._list_wrap=this._tg.children(),this._list_wrap.find(".blank").remove(),this._list=this._list_wrap.children(),this._width=parseInt(this._tg.css("width")),this._item_w=parseInt(this._list.css("width")),this._len=this._list.length,this._range=this.opts.range*this._width,this._pos=[],this._start=[],this._startX=0,this._startY=0,this._left=0,this._top=0,this._drag=!1,this._link=!0,this._scroll=!1,this._hover_tg=[],this._btn_prev=null,this._btn_next=null,this._timer=null,this._tg.off("touchstart",this.touchstart).off("touchmove",this.touchmove).off("touchend",this.touchend).off("touchcancel",this.touchend).off("dragstart",this.touchstart).off("drag",this.touchmove).off("dragend",this.touchend).on("touchstart",this.touchstart).on("touchmove",this.touchmove).on("touchend",this.touchend).on("touchcancel",this.touchend).on("dragstart",this.touchstart).on("drag",this.touchmove).on("dragend",this.touchend),this._tg.children().css({width:this._width+"px",overflow:"visible"}),this.opts.flexible&&(this._item_w=this._width/this._view),this.opts.roll){if(this._len/this._view<=1&&(this.opts.roll=!1),0<this._len%this._view)for(var t=l(document.createElement(this._list.eq(0).prop("tagName"))).hide().addClass("blank"),i=this._view-this._len%this._view,e=0;e<i;++e)this._list.parent().append(t.clone());this._list=this._tg.children().children(),this._len=this._list.length,this._len=this._len/this._view*this._view}for(var o=1<this.opts.page&&this.opts.page<=this._len?(this.opts.page-1)*this._item_w*this._view:0,n=0,h=this._len;n<h;++n)this._pos[n]=this._item_w*n-o,this._start[n]=this._pos[n],this._list.eq(n).css({float:"none",position:"absolute",top:"0",width:this._item_w+"px"}),this.move({tg:this._list.eq(n),to:this._pos[n]});this.opts.btn_prev&&this.opts.btn_next&&(this.opts.btn_prev.off("click").on("click",function(){return s.animate(1,!0),!1}),this.opts.btn_next.off("click").on("click",function(){return s.animate(-1,!0),!1})),this.opts.paging&&(l(this._list).each(function(t){var i=s.opts.paging.eq(0).clone();s.opts.paging.before(i),i.off("click").on("click",function(){return this.go_page(t),!1})}),this.opts.paging.remove()),this.opts.autoplay.enable&&(this._hover_tg=[],this._hover_tg.push(this._tg),this.opts.btn_prev&&this.opts.btn_next&&(this._hover_tg.push(this.opts.btn_prev),this._hover_tg.push(this.opts.btn_next)),""!==this.opts.autoplay.addHoverTarget&&this._hover_tg.push(l(this.opts.autoplay.addHoverTarget)),this.opts.autoplay.pauseHover&&l(this._hover_tg).each(function(){l(this).off("mouseenter mouseleave").on("mouseenter mouseleave",function(t){"mouseenter"==t.type?s.autoStop():(s.autoStop(),s.autoPlay())})}),this.autoStop(),this.autoPlay()),this._tg.off("click").on("click","a",function(){if(!s._link)return!1}),this.initComplete(),this.counter()},initComplete:function(){this.opts.sidePage&&(this.animate(-1,!0,0),this.animate(1,!0,0)),"function"==typeof this.opts.initComplete&&this.opts.initComplete.call(this,this)},resize:function(t){if(t.opts.flexible){var i=t._item_w;t._width=parseInt(t._tg.css("width")),t._item_w=t._width/t._view,t._range=t.opts.range*t._width,t._list.css({width:t._item_w+"px"}),t._list.parent().css({width:t._item_w+"px"});for(var s=0,e=t._len;s<e;++s)t._pos[s]=t._pos[s]/i*t._item_w,t._start[s]=t._start[s]/i*t._item_w,this.move({tg:t._list.eq(s),to:t._pos[s]})}this.counter()},touchstart:function(t){this.opts.propagation||t.stopPropagation(),("touchstart"==t.type&&t.originalEvent.touches.length<=1||"dragstart"==t.type)&&(this._startX=t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX,this._startY=t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY,this._scroll=!1,this._start=this._pos.slice(0))},touchmove:function(t){if(this.opts.propagation||t.stopPropagation(),"touchmove"==t.type&&t.originalEvent.touches.length<=1||"drag"==t.type){this._left=(t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX)-this._startX,this._top=(t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY)-this._startY,((this._left<0?-1*this._left:this._left)<(this._top<0?-1*this._top:this._top)||this._scroll)&&!this._drag?(this._left=0,this._drag=!1,this._link=!0,this._scroll=!0):(t.preventDefault(),this._drag=!0,this._link=!1,this._scroll=!1,this.position(t));for(var i=0,s=this._len;i<s;++i){var e=this._start[i]+this._left;this.move({tg:this._list.eq(i),to:e}),this._pos[i]=e}}},touchend:function(t){if(this.opts.propagation||t.stopPropagation(),this._scroll)this._drag=!1,this._link=!0,this._scroll=!1;else{this.animate(this.direction()),this._drag=!1,this._scroll=!0;var i=this;setTimeout(function(){i._link=!0},50)}},position:function(t){var i=this._len,s=this._view,e=s*this._item_w,o=0;if(-1==t||1==t?(this._startX=0,this._start=this._pos.slice(0),this._left=t*e):(this._left>e&&(this._left=e),this._left<-e&&(this._left=-e)),this.opts.roll){var n=this._pos.slice(0).sort(function(t,i){return t-i}),h=n[i-s],a=l.inArray(n[0],this._pos),r=l.inArray(h,this._pos),_=this.opts.sidePage?3:1;if(s<=1&&(h=i-_),1==t&&0<=n[_-1]||this._drag&&0<n[_-1])for(o=0;o<s;++o,++a,++r)this._start[r]=this._start[a]-e,this.move({tg:this._list.eq(r),to:this._start[r]});else if(-1==t&&n[h]<=0||this._drag&&n[h]<=0)for(o=0;o<s;++o,++a,++r)this._start[a]=this._start[r]+e,this.move({tg:this._list.eq(a),to:this._start[a]})}else this.limit_chk()&&(this._left=this._left/2)},move:function(t){var i=void 0!==t.speed?t.speed+"ms ease":"none",s="translate3d("+t.to+"px,0,0)",e={left:"0","-moz-transition":i,"-moz-transform":s,"-ms-transition":i,"-ms-transform":s,"-webkit-transition":i,"-webkit-transform":s,transition:i,transform:s},o=this._list_wrap,n=0;this.opts.supportsCssTransitions&&this.opts.transition?void 0===t.speed?t.tg.css(e):t.btn_click?setTimeout(function(){t.tg.css(e)},10):(n=0<t.gap?-(t.to-t.from):t.from-t.to,t.tg.css({left:t.to+"px","-moz-transition":"none","-moz-transform":"none","-ms-transition":"none","-ms-transform":"none","-webkit-transition":"none","-webkit-transform":"none",transition:"none",transform:"none"}),o.css({transition:"none",transform:"translate3d("+n+"px,0,0)"}),setTimeout(function(){o.css({transition:t.speed+"ms ease",transform:"translate3d(0,0,0)"})},10)):void 0===t.speed?t.tg.css("left",t.to+"px"):t.tg.stop().animate({left:t.to+"px"},t.speed)},animate:function(t,i,s){if(this._drag||!this._scroll||i){var e=-1<s?s:this._speed,o=t*(this._item_w*this._view),n=this._list,h=0,a=0;i&&this.position(t),(0===this._left||!this.opts.roll&&this.limit_chk())&&(o=0);for(var r=0,_=this._len;r<_;++r)h=this._pos[r],a=this._pos[r]=this._start[r]+o,this.move({tg:n.eq(r),gap:o,from:h,to:a,speed:e,btn_click:i});0!==t&&this.counter()}},direction:function(){var t=0;return this._left<-this._range?t=-1:this._left>this._range&&(t=1),this._drag&&!this._scroll||(t=0),t},limit_chk:function(){var t=parseInt((this._len-1)/this._view)*this._view;return 0===this._start[0]&&0<this._left||0===this._start[t]&&this._left<0},go_page:function(t){for(var i=l.inArray(0,this._pos)/this._view+1-(t+1);0!==i;)i<0?(this.animate(-1,!0),i++):0<i&&(this.animate(1,!0),i--)},get_page:function(){return{obj:this,total:Math.ceil(this._len/this._view),current:l.inArray(0,this._pos)/this._view+1}},counter:function(){if(this.opts.breakpoints){var t=this._width,i=this.opts.breakpoints.defaultOption,s=i,e=!1;for(var o in this.opts.breakpoints)if(Boolean(Number(o))&&t<=Number(o)){s=this.opts.breakpoints[o];break}for(var n in s)i.hasOwnProperty(n)&&this.opts[n]!==s[n]&&(this.opts[n]=s[n],e=!0);e&&this.init()}l.inArray(0,this._pos)<0&&(this.opts.page=0,this.init()),this.opts.page=this.get_page().current,this.opts.resize&&this._tg.css({height:this._list.eq(this.opts.page-1).height()+"px"}),"function"==typeof this.opts.counter&&this.opts.counter.call(this,this.get_page())},autoPlay:function(){var i=this;this._timer=setInterval(function(){if(i.opts.autoplay.enable&&!i._drag){var t=i.get_page();t.current!=t.total||i.opts.roll?i.animate(-1,!0):i.go_page(0)}},this.opts.autoplay.interval)},autoStop:function(){clearInterval(this._timer)},autoPauseToggle:function(){return this.opts.autoplay.enable?(this.autoStop(),this.opts.autoplay.enable=!1,"stopped"):(this.opts.autoplay.enable=!0,this.autoPlay(),"started")}}}(jQuery);